amends "pkl:test"

import "../utils.pkl"

local r1 = List("A1", "A2", "A3", "B1", "B2", "B3")


facts {
  ["checkSegId"] {
    utils.checkCellName("A22") == true
    utils.checkCellName("G22") == false
    utils.checkCellName("A01") == true
    utils.checkCellName("A00") == false
    utils.checkCellName("A82") == true
    utils.checkCellName("A83") == false
  }
  ["checkSegs"] {
    utils.createCellNames(List("A", "B"), 3) == r1
    utils.createCellNames(utils.allSectors, utils.SEGMENTS_PER_SECTOR).length == utils.TOTAL_NUMBER_SEGMENTS_ON_TELESCOPE
  }
  ["sectorLetter"] {
    utils.cellName("A2").sectorLetter == "A"
    utils.cellName("C80").sectorLetter == "C"
    utils.cellName("F8").sectorLetter == "F"
  }
  ["sectorNumber"] {
    utils.cellName("A2").sectorNumber == 1
    utils.cellName("F2").sectorNumber == 6
  }
  ["mirrorNumber"] {
    utils.cellName("A1").mirrorNumber == 1
    utils.cellName("B1").mirrorNumber == 1
    utils.cellName("F82").mirrorNumber == 82
  }
  ["toSegNum"] {
    utils.toSegNum("SN-001") == 1
    utils.toSegNum("SN-492") == 492
  }
  ["toSegName"] {
    utils.toSegName(1) == "SN-001"
    utils.toSegName(492) == "SN-492"
  }
  ["segmentNumber"] {
    utils.cellName("A1").segNum == 1
    utils.cellName("B1").segNum == 83
    utils.cellName("C19").segNum == 183
    utils.cellName("B1").segNum == utils.SEGMENTS_PER_SECTOR+1
    utils.cellName("F82").segNum == utils.TOTAL_NUMBER_SEGMENTS_ON_TELESCOPE
  }
  ["cellName"] {
    utils.getCellNameFromNum(1) == "A1"
    utils.getCellNameFromNum(183) == "C19"
    utils.getCellNameFromNum(328) == "D82"
    utils.getCellNameFromNum(329) == "E1"
    utils.getCellNameFromNum(411) == "F1"
    utils.getCellNameFromNum(492) == "F82"
  }
  ["globalActuatorNumber"] {
    utils.globalActuatorNumber("A1", 1) == 1
    utils.globalActuatorNumber("A2", 1) == 4
    utils.globalActuatorNumber("A10", 2) == 29
    utils.globalActuatorNumber("B21", 3) == 309
    utils.globalActuatorNumber("C49", 2) == 638
    utils.globalActuatorNumber("D82", 3) == 984
    utils.globalActuatorNumber("F82", 1) == 1474
    utils.globalActuatorNumber("F82", 2) == 1475
    utils.globalActuatorNumber("F82", 3) == 1476
  }
  ["localActuatorNumber"] {
    utils.localActuatorNumber(1) == 1
    utils.localActuatorNumber(2) == 2
    utils.localActuatorNumber(3) == 3
    utils.localActuatorNumber(4) == 1
    utils.localActuatorNumber(309) == 3
    utils.localActuatorNumber(638) == 2
    utils.localActuatorNumber(984) == 3
    utils.localActuatorNumber(1474) == 1
    utils.localActuatorNumber(1475) == 2
    utils.localActuatorNumber(1476) == 3
  }
  ["globalSensorNumber"] {
    utils.globalSensorNumber("A2", 1) == 13
    utils.globalSensorNumber("A10", 12) == 120
    utils.globalSensorNumber("B21", 8) == 1232
    utils.globalSensorNumber("C49", 6) == 2550
    utils.globalSensorNumber("D82", 3) == 3927
    utils.globalSensorNumber("E82", 12) == 4920
    utils.globalSensorNumber("F1", 1) == 4921
    utils.globalSensorNumber("F82", 12) == 5904
  }
  ["globalSensorNumberToSeg"] {
    utils.globalSensorNumberToSeg(13) == "A2"
    utils.globalSensorNumberToSeg(120) == "A10"
    utils.globalSensorNumberToSeg(1232) == "B21"
    utils.globalSensorNumberToSeg(2550) == "C49"
    utils.globalSensorNumberToSeg(3927) == "D82"
    utils.globalSensorNumberToSeg(4920) == "E82"
    utils.globalSensorNumberToSeg(4921) == "F1"
  }
  ["globalSensorNumberToLocalSensorNumber"] {
    utils.globalSensorNumberToLocalSensorNumber(13) == 1
    utils.globalSensorNumberToLocalSensorNumber(120) == 12
    utils.globalSensorNumberToLocalSensorNumber(1232) == 8
    utils.globalSensorNumberToLocalSensorNumber(2550) == 6
    utils.globalSensorNumberToLocalSensorNumber(3927) == 3
    utils.globalSensorNumberToLocalSensorNumber(4920) == 12
    utils.globalSensorNumberToLocalSensorNumber(4921) == 1
    utils.globalSensorNumberToLocalSensorNumber(5904) == 12
  }
  ["globalSensorNumberToPair"] {
    utils.globalSensorNumberToPair(13) == Pair("A2", 1)
    utils.globalSensorNumberToPair(120) == Pair("A10", 12)
    utils.globalSensorNumberToPair(1232) == Pair("B21", 8)
    utils.globalSensorNumberToPair(2550) == Pair("C49", 6)
    utils.globalSensorNumberToPair(3927) == Pair("D82", 3)
    utils.globalSensorNumberToPair(4920) == Pair("E82", 12)
    utils.globalSensorNumberToPair(4921) == Pair("F1", 1)
    utils.globalSensorNumberToPair(5904) == Pair("F82", 12)
  }

}